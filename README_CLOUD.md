# FloydHub

Config:
- [.floydexpt](.floydexpt) - generated by `floyd login`  
- [floyd.yml](floyd.yml) - generated by `floyd init`
- [floyd_requirements.txt](floyd_requirements.txt) - runs `pip install`
- [.floydignore](.floydignore) - 100Mb filesize upload

Execute:
```
floyd status
floyd stop    $ID
floyd delete  $ID
```

```bash
floyd run -m "random_seed_search: 0:2000" \
    "python3 ./src/random/random_seed_search.py --min_seed=0    --increment=1000 --method=numpy &" \
    "python3 ./src/random/random_seed_search.py --min_seed=1000 --increment=1000 --method=numpy &" \
    "jobs; wait %2 %3; exit"       
```
```bash
START=160000000
   INC=10000000
for i in `seq 0 6`; do
    N1=`echo "$START + $INC * ($i    )" | bc`
    N2=`echo "$START + $INC * ($i + 1)" | bc`
    floyd run -m "random_seed_search: $N1:$N2" \
        "python3 ./src/random/random_seed_search.py --min_seed=$N1 --increment=$INC --method=numpy &" \
        "python3 ./src/random/random_seed_search.py --min_seed=$N2 --increment=$INC --method=numpy &" \
        "jobs; wait %2 %3; exit;"       
done
```
- https://www.floydhub.com/jamesmcguigan/projects/randomseedsearch/

View Logs
```
floyd status | grep random_seed_search | grep -v failed | awk1 |      
    xargs -L1 -P0 -t timeout 5 floyd logs 2> /dev/null |      
    grep Found | sed 's/^.*-//' | sort -n -k5 | uniq 
```


# Gradient Paperspace

NOTE: Paperspace batch jobs can take 20+ minutes to run

- Docs: https://paperspace.github.io/paperspace-node/jobs.html
- Containers: https://docs.paperspace.com/gradient/notebooks/notebook-containers
    - BROKEN: tensorflow/serving:latest-gpu
    - WORKS:  jupyter/datascience-notebook
    - SLOW?:  ufoym/deepo:all-py36-jupyter 
    - UNTESTED: tensorflow/tensorflow:2.0.0a0-gpu-py3-jupyter
 
- Jobs: https://www.paperspace.com/console/projects/prw0az0p6/experiments
```
gradient jobs list
gradient projects list
```


```
time -p \
gradient experiments run singlenode \
    --command 'ls -la' \
    --name 'ls -la' \
    --machineType G1  \
    --container ufoym/deepo:all-py36-jupyter \
    --projectId prw0az0p6 \
    --workspace https://github.com/JamesMcGuigan/kaggle-digit-recognizer.git
```
- jupyter/datascience-notebook = 22min


````
time -p \
gradient experiments run singlenode \
    --command 'pip install -r requirements.in; python3 src/random/random_seed_search.py --min_seed 0 --increment 10000' \
    --name                                    'python3 src/random/random_seed_search.py --min_seed 0 --increment 10000' \
    --container tensorflow/tensorflow:2.0.0a0-gpu-py3-jupyter \
    --machineType G1  \
    --projectId prw0az0p6 \
    --workspace https://github.com/JamesMcGuigan/kaggle-digit-recognizer.git
```
